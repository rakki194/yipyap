<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thinking...</title>
  <style>
    :root {
      --light-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      --dark-gradient: linear-gradient(135deg, #2d3436 0%, #000000 100%);
      --text-color: #666;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: var(--light-gradient);
      transition: background 1.5s ease, color 1.5s ease;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body.dark-mode {
      background: var(--dark-gradient);
      color: white;
      --text-color: #999;
    }

    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border: none;
      background: none;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.5s ease;
      color: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      background-color: rgba(255, 255, 255, 0.1);
      -webkit-backdrop-filter: blur(5px);
      backdrop-filter: blur(5px);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    .dots-container {
      display: flex;
      gap: 18px;
    }

    .dot {
      width: 20px;
      height: 20px;
      background-color: currentColor;
      border-radius: 50%;
      opacity: 0.3;
      animation: bounce 2s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
    }

    .dot:nth-child(1) {
      animation-delay: 0s;
    }

    .dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: translateY(0);
        opacity: 0.3;
      }

      25% {
        transform: translateY(-20px);
        opacity: 1;
      }

      50% {
        transform: translateY(0);
        opacity: 0.3;
      }

      75% {
        transform: translateY(-10px);
        opacity: 0.6;
      }
    }

    @media (prefers-color-scheme: dark) {
      body:not(.light-mode) {
        background: var(--dark-gradient);
        color: white;
      }
    }

    .thinking-dropdown {
      width: 80%;
      margin: 20px auto;
    }

    .dropdown-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      padding: 10px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 4px;
      transition: background 0.3s;
    }

    .dropdown-header:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .gradient-text {
      font-weight: bold;
      font-size: 1.2em;
      background: linear-gradient(90deg, #ff0080, #ff8c00);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .dropdown-icon {
      transition: transform 0.5s ease;
    }

    .thinking-dropdown .dropdown-content {
      max-height: 0;
      transition: max-height 0.5s ease;
      overflow: hidden;
    }

    .thinking-dropdown.expanded .dropdown-content {
      max-height: 1000px;
      transition: max-height 0.5s ease;
    }

    .thinking-dropdown.expanded .dropdown-icon {
      transform: rotate(180deg);
    }

    .header-animated {
      background: linear-gradient(90deg, #ff0080, #ff8c00);
      background-size: 200% auto;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: headerGradient 2s linear infinite;
    }

    @keyframes headerGradient {
      0% {
        background-position: 0% 50%;
        opacity: 0.5;
      }

      50% {
        background-position: 100% 50%;
        opacity: 1;
      }

      100% {
        background-position: 0% 50%;
        opacity: 0.5;
      }
    }
  </style>
</head>

<body>
  <button class="theme-toggle" aria-label="Toggle theme">‚òÄÔ∏è</button>
  <div class="dots-container">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>

  <div class="thinking-dropdown">
    <div class="dropdown-header gradient-text">
      <span id="thinking-text" class="header-animated"></span>
      <svg class="dropdown-icon" width="16" height="16" viewBox="0 0 16 16">
        <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" fill="none" fill-rule="evenodd" />
      </svg>
    </div>
    <div class="dropdown-content">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cogito ergo sum diarrea. In hac habitasse platea
        dictumst, sed fermentum augue varius at. Praesent in ipsum vitae massa tristique convallis. Etiam non arcu
        pellentesque, consequat orci nec, laoreet metus. Integer vitae sapien non est maximus semper. Fusce lacinia,
        orci vel dictum dictum, ante purus dignissim erat, at volutpat nunc mauris nec quam. Cras scelerisque, urna ut
        aliquam fringilla, mauris lectus tincidunt nunc, et congue ligula ligula vel libero.</p>
      <p>Phasellus imperdiet, nulla et dictum interdum, nisi lorem egestas odio, vitae scelerisque enim ligula venenatis
        dolor. Vivamus lacinia odio vitae vestibulum vestibulum, sed consectetur urna blandit vitae. Mauris lobortis,
        orci non interdum luctus, massa sapien laoreet enim, et imperdiet sem justo at leo.</p>
      <p>Sed ut perspiciatis unde <code>omnis iste</code> natus error sit voluptatem accusantium doloremque laudantium,
        totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt
        explicabo.</p>
    </div>
  </div>

  <script>
    const body = document.body;
    const themeToggle = document.querySelector('.theme-toggle');

    // Check for a saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      body.classList.toggle('dark-mode', savedTheme === 'dark');
      body.classList.toggle('light-mode', savedTheme === 'light');
      themeToggle.textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    }

    themeToggle.addEventListener('click', () => {
      const isDark = body.classList.toggle('dark-mode');
      body.classList.toggle('light-mode', !isDark);
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      themeToggle.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
    });
  </script>
  <script>
    (function () {
      const thinkingDropdown = document.querySelector('.thinking-dropdown');
      const dropdownHeader = document.querySelector('.dropdown-header');
      const thinkingText = document.querySelector('#thinking-text');
      const dotsContainer = document.querySelector('.dots-container');
      const contentEl = document.querySelector('.dropdown-content');
      const seconds = Math.floor(Math.random() * 19) + 1;

      // Store original paragraphs
      const originalParagraphs = Array.from(contentEl.children).map(p => p.innerHTML);

      // Clear content initially
      contentEl.innerHTML = originalParagraphs.map(p => `<p></p>`).join('');

      // Set initial states
      thinkingText.textContent = "Thinking about it..";
      thinkingDropdown.classList.add('expanded');

      const totalTime = seconds * 1000;
      const startTime = performance.now();
      function animate() {
        const elapsed = performance.now() - startTime;
        const progress = Math.min(elapsed / totalTime, 1);

        // Calculate which paragraph should be animating
        const totalParagraphs = originalParagraphs.length;
        const progressPerParagraph = 1 / totalParagraphs;

        // Animate paragraphs sequentially
        const paragraphs = contentEl.getElementsByTagName('p');
        originalParagraphs.forEach((original, index) => {
          const paragraphStartProgress = index * progressPerParagraph;
          const paragraphEndProgress = (index + 1) * progressPerParagraph;

          if (progress < paragraphStartProgress) {
            // Paragraph hasn't started yet
            paragraphs[index].innerHTML = '';
          } else if (progress > paragraphEndProgress) {
            // Paragraph is complete
            paragraphs[index].innerHTML = original;
          } else {
            // Paragraph is currently animating
            const paragraphProgress = (progress - paragraphStartProgress) / progressPerParagraph;
            const charsToShow = Math.floor(paragraphProgress * original.length);
            paragraphs[index].innerHTML = original.substring(0, charsToShow);
          }
        });

        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          finishThinking();
        }
      }

      function finishThinking() {
        // Restore full content
        contentEl.innerHTML = originalParagraphs.map(p => `<p>${p}</p>`).join('');

        // Update header
        const finalMessage = seconds === 1 ? "Thought about it for 1 second" : `Thought about it for ${seconds} seconds`;
        thinkingText.textContent = finalMessage;

        // Remove animation and set static color
        thinkingText.classList.remove('header-animated');
        thinkingText.style.background = 'none';
        thinkingText.style.color = 'var(--text-color, #666)';

        // Hide dots
        if (dotsContainer) {
          dotsContainer.style.display = 'none';
        }
      }

      // Enable dropdown toggling
      dropdownHeader.addEventListener('click', () => {
        thinkingDropdown.classList.toggle('expanded');
      });

      // Start animation
      animate();
    })();
  </script>
</body>

</html>