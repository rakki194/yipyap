<div class="modal-content">
    <div class="modal-header">
        <h2>{{ image.name }}</h2>
        <div class="modal-actions">
            <a href="/download/{{ image.path }}" class="download-btn" download>
                <i class="ri-download-line"></i>
            </a>
            <button class="close"
                onclick="document.getElementById('image-modal').classList.remove('show')">&times;</button>
        </div>
    </div>

    <div class="modal-body">
        <img src="/preview/{{ image.path }}" alt="{{ image.name }}">

        <div class="image-info">
            <div class="metadata">
                <p>Size: {{ image.size|filesizeformat }}</p>
                <p>Modified: {{ image.modified }}</p>
                <p>Type: {{ image.mime }}</p>
                <p>Dimensions: {{ image.width }}Ã—{{ image.height }}</p>
            </div>

            <div class="caption-editor">
                <textarea hx-put="/caption/{{ image.path }}" hx-trigger="change delay:1s"
                    hx-ext="json-enc">{{ caption }}</textarea>
                <div class="caption-status"></div>
            </div>
        </div>
    </div>
</div>

<script>
    document.body.addEventListener('htmx:afterSwap', function (evt) {
        if (evt.detail.target.id === 'image-modal') {
            evt.detail.target.classList.add('show');
        }
    });
</script>